{
  "kind": "build_request",
  "title": "Add admin photo upload for Gallery and Activities + improve photo viewing UX",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-51",
      "text": "Update the Admin Dashboard content editors to support uploading photos from the user’s device (not only pasting URLs):\n- In `frontend/src/components/admin/GalleryEditorDialog.tsx`, add an image file picker (accept PNG/JPG/WebP) that converts the selected file to a Data URL and stores it into the existing `imageUrl` field.\n- In `frontend/src/components/admin/ActivityEditorDialog.tsx`, add one or more image file pickers that convert selected files to Data URLs and append them into the existing `photos: string[]` list.\nUse English user-facing text for labels, helper text, and errors.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "add in admin page toupoad photo in gallary page & activites."
        ]
      },
      "acceptanceCriteria": [
        "Gallery editor supports selecting an image file from disk and shows a preview before saving.",
        "Saving a gallery item after selecting a file persists the image by storing a Data URL in `imageUrl` (no backend schema/API changes required).",
        "Activity editor supports selecting one or multiple image files from disk and adds them to the photos list as Data URLs.",
        "Activity editor still supports adding photos by URL (existing behavior preserved).",
        "All new/updated labels, helper text, and validation messages are in English.",
        "Admin-only access behavior remains unchanged (only users with the existing content permissions can create/edit)."
      ]
    },
    {
      "id": "REQ-52",
      "text": "Add basic client-side validation and guardrails for admin photo uploads:\n- Enforce allowed MIME types (PNG/JPG/WebP).\n- Enforce a clear maximum file size per image (with an English validation message when exceeded).\n- Show an English warning/helper note in the dialogs that uploaded images are stored inside the app data (as embedded images) and that large images may be slow.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "add in admin page toupoad photo in gallary page & activites."
        ]
      },
      "acceptanceCriteria": [
        "Selecting an unsupported file type shows an English validation error and does not add/set the photo.",
        "Selecting a file larger than the configured limit shows an English validation error and does not add/set the photo.",
        "Gallery dialog and Activity dialog show a short English helper note about embedded images and performance/size considerations.",
        "Existing create/update flows still work when using URL inputs only (no regression)."
      ]
    },
    {
      "id": "REQ-53",
      "text": "Improve the Gallery and Activities viewing experience (additional feature enhancement requested by the user) by adding an in-page photo viewer:\n- In `frontend/src/pages/GalleryPage.tsx`, allow clicking a gallery image card to open a modal/lightbox that shows the image larger, with title/description, and Next/Previous navigation across the current list.\n- In `frontend/src/pages/ActivitiesPage.tsx`, allow clicking an activity photo thumbnail to open it in a modal/lightbox (and optionally navigate among that activity’s photos).\nUse English user-facing text for actions like Close/Next/Previous.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "add more feature that you think it should."
        ]
      },
      "acceptanceCriteria": [
        "Clicking a gallery image opens a modal/lightbox with a larger preview and English-labeled controls (at minimum: Close; plus Next/Previous for gallery).",
        "Clicking an activity photo opens a modal/lightbox with a larger preview and an English-labeled Close control.",
        "Lightbox is keyboard-accessible at a basic level (Escape closes).",
        "No changes to the approval/auth gating: `/gallery` and `/activities` remain behind the existing `RequireApproved` pattern."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under `frontend/src/components/ui` (compose existing UI components instead).",
    "Do not modify immutable frontend paths: `frontend/src/hooks/useInternetIdentity.ts`, `frontend/src/hooks/useInternetIdentity.tsx`, `frontend/src/hooks/useActor.ts`, `frontend/src/main.tsx`.",
    "Keep all user-facing text in English.",
    "Backend must remain single-actor (no new backend canisters/services)."
  ],
  "nonGoals": [
    "Implementing a separate asset canister or external image hosting/CDN.",
    "Adding third-party storage integrations (S3, Cloudinary, etc.).",
    "Changing backend data models for gallery/activities (store uploads using existing `imageUrl`/`photos` string fields as Data URLs for this iteration).",
    "Adding real-time collaboration or live updates beyond current React Query invalidation patterns."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}